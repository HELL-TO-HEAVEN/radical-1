本文主要探讨规则在问答场景的应用。

​	规则方法，主要是通过正则或模板方式**穷举**可能的句式（正向匹配），并将各个句式分割为不同成分或语义类，提取意图相关的语义类。这类句式必须是可以穷举的，因此仅适用于问答中技能的场景。其中正则、模板等方法实际上类似于分词！只不过是将语义类作为分词的词典对句子进行分割，其中OOV词即为意图相关的语义类，因此，可以借鉴分词的方法。

---

规则常用方法:

1. 正则方法（精确匹配）

   正则引擎

2. 模板方法

   eliza、aiml、chatscript、IF中间语义表示等（:question:）

3. 分词方法

   当正则或模板不够用时，可以借鉴分词方法：<br>有向无环图(DAG)、最大匹配方法、最小切分方法<br>chart parsing<br>[Wu Manber多模式匹配算法](http://www.hankcs.com/program/algorithm/wu-manber.html)<br>[Aho Corasick自动机结合DoubleArrayTrie极速多模式匹配](http://www.hankcs.com/program/algorithm/aho-corasick-double-array-trie.html)

   :question:

---

方法比较：

1. 规则方法

规则方法需要借助语义类变量及各种句式的规则

2. 分词方法

分词方法只需借助语义类变量，无需为各种句式配置规则

两种方法都可以借助语义类变量对句子标注，有利于后期的序列标注任务。

---

规则设计的原则：

1. 规则可灵活配置

规则的灵活配置，既有利于规则的新增，也要具有可扩展性。<br>譬如在特定技能中，除技能或意图相关的语义类之外（仅一至两个语义类），其他语义类尽量可通用，使其在不同的技能中具有不同的作用域。

1) 规则的粒度

一个规则是处理整个句式，还是处理句式中的语义类？不同粒度关系到规则的可控性。

2) 规则的覆盖

一个规则最多覆盖三种句式，避免后续新增规则的冲突

2. 规则与标注

在数据量还不够的情况下，设计好的规则，如果能够考虑到数据标注这块，可以方便在数据量足够时，利用已有规则（反向生成）标注数据，训练模型，甚至可以替换规则模块或自动生成规则。

尽量将规则的设计当成==序列标注==问题，序列标注是word level (细粒度)的标注，覆盖的信息比较丰富，有利于后期sentence level (粗粒度)的标注及分析。

如何将规则与标注结合？

---

规则的测试：

1. 规则的合法性检测
2. 尽量使规则处理通用的句式，避免规则处理corner case等边界之类的特殊句式。



